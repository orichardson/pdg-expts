

\documentclass{article}


\input{../model-commands.tex}
\usepackage[margin=1in]{geometry}
\usepackage{parskip}

\usetikzlibrary{external}
\tikzexternalize[prefix=tikz/]  % activate!
\usepackage{etoolbox}
\AtBeginEnvironment{tikzcd}{\tikzexternaldisable} %... except careful of tikzcd...
\AtEndEnvironment{tikzcd}{\tikzexternalenable}

\cleartheorem{defn}
\declaretheorem[name=Definition,style=definition,qed=$\square$]{defn}


%\let\Horig\H
%\renewcommand{\H}{\mathop{\mathrm H}}
%\newcommand{\E}{\mathop{\mathbb E}}
\newcommand{\bp}[1][L]{\mathbf{p}_{\!_#1\!}}
\newcommand{\V}{\mathcal V}
\newcommand{\N}{\mathcal N}
\newcommand{\Ed}{\mathcal A}

\DeclareMathAlphabet{\mathdcal}{U}{dutchcal}{m}{n}
\DeclareMathAlphabet{\mathbdcal}{U}{dutchcal}{b}{n}

\newcommand{\ed}[3]{#2
	\overset{\smash{\mskip-5mu\raisebox{-1pt}{$\scriptscriptstyle
				#1$}}}{\rightarrow} #3} 
\newcommand{\dg}[1]{\mathbdcal #1}
\newcommand\Pa{\mathbf{Pa}}

%\twocolumn
\title{The PDG Manual}
\author{Oliver Richardson  \texttt{oli@cs.cornell.edu}}
\begin{document}
	\maketitle
	
	\def\mnvars[#1]{(\N#1, \Ed#1, \V#1, \mat p#1, \alpha#1,\beta#1)}
	\begin{defn}[sPDG]\label{def:model}
		A strict PDG is a tuple $\mnvars[]$ where
		\begin{description}[nosep]
			\item[$\N$]~is a finite collection of nodes, corresponding to variables
			\item[$\Ed$]~is a collection of directed edges (arrows), each with a source, target, and a (possibly empty) label.
			\item[$\V$]~associates each node $N \in \N$ with a set $\V(N)$,
			representing the values that the variable $N$ can take. 
			\item[$\mathbf p$] associates, for each edge $L = (X,Y, \ell) \in \Ed$ and $x \in \V(X)$ a distribution $\bp(x)$ on $Y$, whenever $\beta_L > 0$.
			\item[$\beta$]~associates to each edge $L$, a number in $[0,\infty]$, indicating certainty in the conditional distribution $\bp(Y \mid X)$ 
			\item[$\alpha$]~associates to each edge $L$, a number in $[0,1]$, indicating degree of belief that $L$ holds causally.
		\end{description}
		\vspace{-1.4em}
	\end{defn}

	
	
	\section{Generalized Semantics}
	Let $d$ be a distribution over $\Ed^{\dg M}$. 
	Choose a link $\ed LXY \in \Ed$, and let $\mathbf Z := \N^\dg M \setminus \{X, Y\}$ be the set of all other variables, so that a joint setting is characterized by a value $(x,y,\mat z)$.
	
	The link $L$ and its associated cpt $\bp$ can be extended to a transformer $\tau_L: \Delta \V(\dg M) \to \Delta \V(\dg M)$ on joint distributions in a couple of ways
	\begin{align*}
		 \tau(\mu)(x,y,\mat z) &:= \mu(x,y,\mat z) \frac{\bp(y \mid x)}{\mu(y\mid x)} 
			 &  \tau(\mu)(x,y,\mat z) &:= \mu(x,y,\mat z) \frac{\bp(y \mid x)}{\mu(y\mid x, \mathbf z)} \\
 			&= \mu(x)\; \bp(y \mid x)\; \mu(\mat z \mid x,y) 
			 &   &= \mu(x,\mat z)\; \bp(y \mid x)
	\end{align*}

		
	
	
\end{document}