%  Beamer Style
\documentclass[xcolor={dvipsnames,rgb}]{beamer}

\usepackage{lmodern}
% \includeonlyframes{current}
\usepackage[utf8]{inputenc}
\usetheme{Boadilla}% Beamer Theme Customization...
	\setbeamersize{description width=0.57cm}
	\usefonttheme[stillsansserifsmall]{serif}
		% \usefonttheme{structuresmallcapsserif}
	\usefonttheme[onlylarge]{structuresmallcapsserif}
		% \usefonttheme[onlymath]{serif}
		% \usefonttheme[onlysmall]{structurebold}
	\setbeamerfont{item}{series=\bfseries}
	\setbeamerfont{block title}{series=\bfseries}
	% \setbeamerfont{title}{family=\rmfamily}

	\relax%%% color definitions %%...
		\colorlet{structurecolor}{RoyalPurple!50!black}
		\colorlet{alertcolor}{YellowOrange}
			% \colorlet{alertcolor}{structurecolor>wheel,1,3}
		\colorlet{benchcolor1}{Emerald!85!black}
			% \colorlet{benchcolor1}{structurecolor>wheel,2,3}
		\colorlet{benchcolor2}{YellowOrange!25!magenta}
	\usecolortheme[named=structurecolor]{structure}
		% \usecolortheme{beaver}
		% \setbeamercolor*{palette primary}{bg=color1, fg = green}
		% \setbeamercolor*{palette secondary}{bg=color2, fg = green}
		% \setbeamercolor*{palette tertiary}{bg=color3, fg = green}
		% \setbeamercolor*{palette quaternary}{bg=color4, fg = green}
		% \makeatletter
		% \definecolor{beamer@blendedblue}{rgb}{0.2,0.2,0.7}
		% \colorlet{beamer@blendedblue}{color2}
		% \makeatother
	\setbeamercolor{description item}{bg={structurecolor!20!white}}
	\setbeamercolor{alerted text}{fg=alertcolor}

	\newbool{precompiledfigs}% ...
		\setbool{precompiledfigs}{false}
		% the etoolbox way, which works with beamer.
	% \setbeamercovered{dynamic}

\newcommand<>{\hl}[2][alertcolor]{\begingroup%
	\setbeamercolor{alerted text}{fg=#1}\alert#3{#2}\endgroup}
\colorlet{notationcolor}{benchcolor2}
\def\notation#1{\!\hl[notationcolor]{#1$\quad$}}
% \newcommand<>{\alertwith}[2]{\begingroup\only#3{\setbeamercolor{alerted text}{fg=#1}}#2\endgroup} % DOESN'T WORK THIS WAY
\def\Set{\mathbf{Set}}
\newenvironment{localfocusenv}{\only{\setbeamercolor{local structure}{fg=alertcolor}}}{}
\newenvironment<>{hidemeenv}{%
	\only#1{\setbeamercolor{alerted text}{fg=black!60}}%
	\begingroup\begin{alertenv}#1%
	}{\end{alertenv}\endgroup}

\newenvironment<>{tikzpicture||precompiled}[2][]{
		\ifbool{precompiledfigs}{\includegraphics[width=0.8\linewidth]{figure-pdfs/#2}
			}\begingroup\only#3\begingroup\begin{tikzpicture}[#1]
	}{\end{tikzpicture}\endgroup\endgroup}

\newcommand<>{\extra}[2][]{%
	\only#3{%
		% \tikzmark{call point};%
		\tikzro \node (call point) {};%
		\begin{tikzpicture}[overlay,remember picture]
			\node[anchor=north west, inner sep=0.8em,
			 			fill=alertcolor!30!structurecolor!30!white,
						draw=structurecolor!70!black, draw opacity=0.5,
						below=1em of call point, #1]{#2};
		\end{tikzpicture}%
	}}
\newcommand{\tikzro}[1][]{\tikz[remember picture, overlay,#1]}
% \newcommand{\tikzmark}[1][last mark]{\tikzro \node (#1){};}

%%%%%%%            Relevant part of PDG Preamble        %%%%%%%%%%%%%%%%
\usepackage{tikz}
	\usetikzlibrary{positioning,calc, arrows, shapes}

	\tikzset{AmpRep/.style={ampersand replacement=\&}}
	\tikzset{center base/.style={baseline={([yshift=-.8ex]current bounding box.center)}}}
	\tikzset{paperfig/.style={center base,scale=0.9, every node/.style={transform shape}}}

	\tikzset{dpadded/.style={rounded corners=2, inner sep=0.6em, draw, outer sep=0.2em, fill={black!50}, fill opacity=0.08, text opacity=1}}
	\tikzset{light pad/.style={outer sep=0.2em, inner sep=0.5em, draw=gray!50}}
	\tikzset{arr/.style={draw, ->, thick, shorten <=3pt, shorten >=3pt}}
	\tikzset{arr0/.style={draw, ->, thick, shorten <=0pt, shorten >=0pt}}
	\tikzset{arr1/.style={draw, ->, thick, shorten <=1pt, shorten >=1pt}}
	\tikzset{arr2/.style={draw, ->, thick, shorten <=2pt, shorten >=2pt}}

	\newcommand{\drawbb}%
		{\draw (current bounding box.south west) rectangle (current bounding box.north east);}
	\ifbool{precompiledfigs}{}{
		\usetikzlibrary{fit, decorations,shapes.geometric}
		\usetikzlibrary{tikzmark}
		\usetikzlibrary{backgrounds}
		\pgfdeclarelayer{foreground}
		\pgfsetlayers{background,main,foreground}

		\pgfdeclaredecoration{arrows}{draw}{
			\state{draw}[width=\pgfdecoratedinputsegmentlength]{%
				\path [every arrow subpath/.try] \pgfextra{%
					\pgfpathmoveto{\pgfpointdecoratedinputsegmentfirst}%
					\pgfpathlineto{\pgfpointdecoratedinputsegmentlast}%
				};
		}}

		\tikzset{dpad0/.style={outer sep=0.05em, inner sep=0.3em, draw=gray!75, rounded corners=4, fill=black!08, fill opacity=1}}
		\tikzset{dpad/.style args={#1}{every matrix/.append style={nodes={dpadded, #1}}}}
		\tikzset{is bn/.style={background rectangle/.style={fill=blue!35,opacity=0.3, rounded corners=5},show background rectangle}}
		% \usetikzlibrary{backgrounds}
		% \usetikzlibrary{patterns}
		\usetikzlibrary{cd}

		\tikzset{fgnode/.style={dpadded,inner sep=0.6em, circle},
				 factor/.style={light pad, fill=black, outer sep=0pt,draw=none}}


		\newcommand\cmergearr[4]{
			\draw[arr,-] (#1) -- (#4) -- (#2);
			\draw[arr, shorten <=0] (#4) -- (#3);
			}
		\newcommand\mergearr[3]{
			\coordinate (center-#1#2#3) at (barycentric cs:#1=1,#2=1,#3=1.2);
			\cmergearr{#1}{#2}{#3}{center-#1#2#3}
			}
		\newcommand\cunmergearr[4]{
			\draw[arr,-, , shorten >=0] (#1) -- (#4);
			\draw[arr, shorten <=0] (#4) -- (#2);
			\draw[arr, shorten <=0] (#4) -- (#3);
			}
		\newcommand\unmergearr[3]{
			\coordinate (center-#1#2#3) at (barycentric cs:#1=1.2,#2=1,#3=1);
			\cunmergearr{#1}{#2}{#3}{center-#1#2#3}
			}


		\usetikzlibrary{matrix}
		\tikzset{toprule/.style={%
		        execute at end cell={%
		            \draw [line cap=rect,#1]
		            (\tikzmatrixname-\the\pgfmatrixcurrentrow-\the\pgfmatrixcurrentcolumn.north west) -- (\tikzmatrixname-\the\pgfmatrixcurrentrow-\the\pgfmatrixcurrentcolumn.north east);%
		        }
		    },
		    bottomrule/.style={%
		        execute at end cell={%
		            \draw [line cap=rect,#1] (\tikzmatrixname-\the\pgfmatrixcurrentrow-\the\pgfmatrixcurrentcolumn.south west) -- (\tikzmatrixname-\the\pgfmatrixcurrentrow-\the\pgfmatrixcurrentcolumn.south east);%
		        }
		    },
		    leftrule/.style={%
		        execute at end cell={%
		            \draw [line cap=rect,#1] (\tikzmatrixname-\the\pgfmatrixcurrentrow-\the\pgfmatrixcurrentcolumn.north west) -- (\tikzmatrixname-\the\pgfmatrixcurrentrow-\the\pgfmatrixcurrentcolumn.south west);%
		        }
		    },
		    rightrule/.style={%
		        execute at end cell={%
		            \draw [line cap=rect,#1] (\tikzmatrixname-\the\pgfmatrixcurrentrow-\the\pgfmatrixcurrentcolumn.north east) -- (\tikzmatrixname-\the\pgfmatrixcurrentrow-\the\pgfmatrixcurrentcolumn.south east);%
		        }
		    },
		    table with head/.style={
			    matrix of nodes,
			    row sep=-\pgflinewidth,
			    column sep=-\pgflinewidth,
			    nodes={rectangle,minimum width=2.5em, outer sep=0pt},
			    row 1/.style={toprule=thick, bottomrule},
	  	    }
			}
		\input{labelmatrix.tex}
		\tikzset{onslide/.code args={<#1>#2}{%
		  \only<#1>{\pgfkeysalso{#2}} % \pgfkeysalso doesn't change the path
			}}
		}

\usepackage{booktabs,microtype}
\usepackage{mathtools, amsfonts, nicefrac, amssymb, bbm} % mathtools loads amsmath
\usepackage{amsthm,thmtools}

	% \theoremstyle{plain}
	% \let\theorem\relax
	% \newtheorem{theorem}{Theorem}%[section]
	% \newtheorem{coro}{Corollary}[theorem]
	\newtheorem{prop}[theorem]{Proposition}
	% \newtheorem{lemma}[theorem]{Lemma}
	% \newtheorem{fact}[theorem]{Fact}

	\theoremstyle{definition}
	\declaretheorem[name=Definition%,qed=$\square$,numberwithin=section
		]{defn}
	% \declaretheorem[name=Construction,qed=$\square$,sibling=defn]{constr}
	% \declaretheorem[qed=$\square$]{example}
	\theoremstyle{remark}
	\newtheorem*{remark}{Remark}
\relax % Macros (\relax is for folding)
	\let\Horig\H
	\let\H\relax
	\DeclareMathOperator{\H}{\mathrm{H}} %
	\DeclareMathOperator{\I}{\mathrm{I}} %
	\DeclareMathOperator*{\Ex}{\mathbb{E}} %
	\DeclareMathOperator*{\argmin}{arg\;min}
	\newcommand{\CI}{\mathrel{\perp\mspace{-10mu}\perp}} %
	\newcommand\mat[1]{\mathbf{#1}}
	\newcommand\Pa{\mathbf{Pa}}

	\DeclarePairedDelimiterX{\infdivx}[2]{(}{)}{#1\;\delimsize\|\;#2}
	\newcommand{\thickD}{I\mkern-8muD}
	\newcommand{\kldiv}{\thickD\infdivx}

	\newcommand{\tto}{\rightarrow\mathrel{\mspace{-15mu}}\rightarrow}

	\newcommand{\ssub}[1]{_{\!_{#1}\!}}
	\newcommand{\bp}[1][L]{\mat{p}\ssub{#1}}
	\newcommand{\V}{\mathcal V}
	\newcommand{\N}{\mathcal N}
	\newcommand{\Ed}{\mathcal E}

	\DeclareMathAlphabet{\mathdcal}{U}{dutchcal}{m}{n}
	\DeclareMathAlphabet{\mathbdcal}{U}{dutchcal}{b}{n}

	\newcommand{\dg}[1]{\mathbdcal{#1}}
	\newcommand{\pdgunit}{\mathrlap{\mathit 1} \mspace{2.3mu}\mathit 1}

	\newcommand{\IDef}[1]{\mathit{IDef}_{\!#1}}
	\newcommand\Inc{\mathit{Inc}}
	\newcommand{\PDGof}[1]{{\dg M}_{#1}}
	\newcommand{\UPDGof}[1]{{\dg N}_{#1}}
	\newcommand{\WFGof}[1]{\Psi_{{#1}}}
	\newcommand{\FGof}[1]{\Phi_{{#1}}}
	\newcommand{\Gr}{\mathcal G}
	\newcommand\GFE{\mathit{G\mkern-4mu F\mkern-4.5mu E}}

	\newcommand{\ed}[3]{%
		\mathchoice%
		{#2\overset{\smash{\mskip-5mu\raisebox{-3pt}{${#1}$}}}{\xrightarrow{\hphantom{\scriptstyle {#1}}}} #3} %display style
		{#2\overset{\smash{\mskip-5mu\raisebox{-3pt}{$\scriptstyle {#1}$}}}{\xrightarrow{\hphantom{\scriptstyle {#1}}}} #3}% text style
		{#2\overset{\smash{\mskip-5mu\raisebox{-3pt}{$\scriptscriptstyle {#1}$}}}{\xrightarrow{\hphantom{\scriptscriptstyle {#1}}}} #3} %script style
		{#2\overset{\smash{\mskip-5mu\raisebox{-3pt}{$\scriptscriptstyle {#1}$}}}{\xrightarrow{\hphantom{\scriptscriptstyle {#1}}}} #3}} %scriptscriptstyle

	\DeclarePairedDelimiterX{\SD}[1]{\{}{\}}{\,\llap{\delimsize\{}#1\rlap{\delimsize\}}\,}
	%better version.
	\DeclarePairedDelimiterX{\bbr}[1]{[}{]}
		{\mspace{3mu}\mathllap{\delimsize[}#1\mathrlap{\delimsize]}\mspace{3mu}}
	\DeclarePairedDelimiterX{\aar}[1]{\langle}{\rangle}
		{\mspace{3mu}\mathllap{\delimsize\langle}#1\mathrlap{\delimsize\rangle}\mspace{3mu}}
	\DeclarePairedDelimiterXPP{\aard}[1]{}{\langle}{\rangle}{_{\!_\downarrow}}
		{\mspace{-3.5mu}\delimsize\langle#1\delimsize\rangle\mspace{-3.5mu}}

%Information to be included in the title page:
\title{Probabilsitic Dependency Graphs}
	\author[O.~Richardson, J.~Halpern]{Oliver~E.~Richardson \and Joseph~Y.~Halpern}
	\institute[Cornell]{Cornell University\\Department of Computer Science}
	\date{AAAI, Febuary 2021}

\begin{document}
\frame{\titlepage}

\begin{frame} %%%%%%%%%%%%% Table of Contents %%%%%%%%%%%%%%
	\frametitle{Contents}
	\tableofcontents
	\end{frame}%------------%


\section{Overview of PGMs, including PDGs}
	\begin{frame}
		\begin{itemize}[<+-|alert@+>]
			\item PDGs can represent inconsistent mental states.
			\item They can express arbitrary probabilistic information.
			\item Bayesian Networks and factor graphs are specific cases.
			\item Compared to BNs:
			\begin{enumerate}
				\item More modular.
				\item Independencies not strictly enforced.
			\end{enumerate}
		\end{itemize}
		\end{frame}

	\subsection{Review of Bayesian Networks}
		\begin{frame} %%%%%%%%%%%        INTRO TO BNS      %%%%%%%%%%%%%%%%
			\frametitle{Review of Bayesian Networks (BNs)}
			\begin{description}
				\item<+->[{\color<4>{benchcolor2!80!black}Qualitative} BN,~~$\Gr$]~\\
					an independence relation on variables, generated by a DAG.
					\begin{itemize}\small
						\item {\color{gray} $X \CI_{\Gr} Y \mid \Pa(X)$, for all non-descendents $Y$ 	of $X$}
					\end{itemize}
				\item<+->[({\color<4>{benchcolor1!80!black}Quantitative}) BN,~~$\mathcal B = (\Gr, \mat p)$]~\\
						a qualitative BN ($\Gr$) and a
						\only<.>{\alert<.>{c}onditional
								\alert<.>{p}robability \alert<.>{d}istribution}
						\only<+->{\alert<.>{cpd}}
						$p_{\!_X}(X \mid \Pa(X))$ for each variable $X$.
								\only<.->{\vspace{-1.2em}}
						%
						\begin{itemize} \small
							\item {\color{gray}Defines a joint distribution $\Pr_{\mathcal B}$ with the independencies $\CI_\Gr$.}
						\end{itemize}
				\end{description}
			\vspace{2em}
			\begin{center}
				\begin{tikzpicture}[paperfig]
					\begin{scope}[every node/.style={dpadded, fill opacity=1,fill=black!08, circle, inner sep=2pt, minimum size=2em, draw=gray}]
						\node (PS) at (0,0) {$\mathit{PS}$};
						\node (SH) at (1.5, 0.6) {$\mathit{SH}$};
						\node (S) at (1.5, -0.6) {$\mathit{S}$};
						\node (C) at (3, 0) {$\mathit{C}$};
						\end{scope}
					\draw[->] (PS) to (S);
					\draw[->] (PS) to (SH);
					\draw[->] (SH) to (C);
					\draw[->] (S) to (C);
					\end{tikzpicture}
				\end{center}
			\end{frame}
		\begin{frame}<0> %%%%%%%%%         PDGs and BNs           %%%%%%%%%%
			\frametitle{What a PDG is}
			% \begin{columns}
			% 	\column{0.5\textwidth}
			% 	{\Large Bayesian Networks (BNs)}
			% 	\begin{itemize}
			% 		\item<1-> Qualitative Structure: a hyper-graph generated by a DAG
			% 		\item<2-> Contains a CPD at each node
			% 	\end{itemize}
			%
			% 	\column{0.5\textwidth}
			% 	{\Large PDGs}
			% 	\begin{itemize}
			% 		\item<1-> Qualitative Structure may be an arbitrary hypergraph
			% 		\item<2-> Contains a CPD for every edge.
			% 	\end{itemize}
			% \end{columns}

			{\renewcommand{\arraystretch}{1.25}
			\begin{tabular}{r|p{0.3\textwidth}p{0.3\textwidth}}
						% this is a "\ctoprule"
						\addlinespace[-\aboverulesep]
		 				\cmidrule[\heavyrulewidth]{2-3}
					& BNs & PDGs \pause \\ \cmidrule{2-3}
				Qualitative Structure
					& Hyper-Graph generated by a DAG
					& Arbitrary hyper-graphs  \pause \\[1em]
				CPDs attached to
					& Nodes
					& Edges
					\\ \bottomrule
			\end{tabular}}


			\ifbool{precompiledfigs}{}{
			\begin{center}\begin{tikzpicture}
				\node[dpadded] (X) at (-2,2) {$X$};
				\node[dpadded] (Y) at (0,0) {$Y$};
				\node[dpadded] (Z) at (2,2) {$Z$};
				\draw[arr] (X) -> (Y);
				\draw[arr] (Z) -> (Y);
			\end{tikzpicture}\end{center}}
			\end{frame}%------------%

\section{Modeling Examples}
	\subsection{Inconsistencies}
		\newlength{\bncolwidth}
		\begin{frame} %%%%%%%%%       GUN FLOOMP: BN vs PDG       %%%%%%%%%%
			%% 1 -- Just BN
			%% 2 -- add PDG.
			%% 3 -- List appears, arbitrary new info.
			%% 4 -- list highlighted, p appears both diagrams (dashed), green box.
			%% 5 -- inconsistent PDG?
			%% 6-8 -- variants of BN w / different info. Final point visible.
			\frametitle{Example: Are Floomps / Guns Legal?}
			% \framesubtitle{The Legality of Floomps and Guns}
			\colorlet{heldout}{benchcolor1!80!black}

			\only<1->{ % Headers "BN" and "PDG"
				\vspace{1.2em}
				\begin{columns}[c]
					\Large\color{structurecolor}
					\begin{column}{.45\textwidth}\centering% Add BN to diagram
						\only<4,5>{\color{structurecolor!20}}%
						\textbf{BN}\\[-1em]
						\rule{2.2cm}{0.95pt}\end{column}
					\only<2->{ % add PDG to diagram
						% \vrule
						\begin{column}{.5\textwidth}\centering%
							\only<6->{\color{structurecolor!20}}%
							\textbf{PDG}\\[-1em]
							\rule{2.7cm}{0.95pt}\end{column}
						}
					\end{columns}
				\vspace{0.4em}
				}

			\begin{columns}[c] %% (both diagrams) ...
				\setlength{\bncolwidth}{0.45\textwidth}
				\only<6->{\setlength{\bncolwidth}{0.51\textwidth}}
				\begin{column}{\bncolwidth} % BN Diagram
					% \begin{block}{BN}
						\centering
						\begin{tikzpicture||precompiled}{fg-BN}[AmpRep, scale=0.9]
							\def\figtabledist{0.50}
							\def\fignodedist{0.8}
							\def\figtableheight{0.32}

							%% Time to unify the notation for cpds.
							% \matrix [table with head, column 1/.style={leftrule}, anchor=south east,
							% 	 column 2/.style={rightrule}, row 2/.style={bottomrule}] at (-\figtabledist,\figtableheight) {
							% 	\vphantom{$\overline fg$} $f$ \& \vphantom{$\overline fg$}$\overline f$\\
							% 	.9 \& .1\\
							% };
							% \matrix [table with head, column 1/.style={leftrule}, anchor=south west,
							% 	 column 2/.style={rightrule}, row 2/.style={bottomrule}] at (\figtabledist,\figtableheight) {
							% 	 \vphantom{$\overline fg$}$g$ \& \vphantom{$\overline fg$}$\overline g$\\
							% 	 .05 \& .95\\
							% };
							\node[,% F's cpd ...
									anchor=south east]
							 	at (-\figtabledist,\figtableheight) {%
								\hspace{-1.2em}%
								\only<1-6,8>{\begin{idxmat}{\!\!}{$f$,$\overline f$}
										.90 & .10 \\
										\end{idxmat}}%
								\only<7>{ \begin{idxmat}{$g$,$\overline g$}{$f$,$\overline f$}
										.92 & .08 \\
										.08 & .92 \\
										\end{idxmat}\hspace{-1em}\;}%
								};
							\node[,% G's cpd ...
									anchor=south west]
								at (\figtabledist,\figtableheight) {%
								\hspace{-1.2em}%
								\only<1-7>{\begin{idxmat}{\!\!}{$g$,$\overline g$}
									.05 & .95 \\
									\end{idxmat}}%
								\only<8>{\begin{idxmat}{$f$,$\overline f$}{$g$,$\overline g$}
										.92 & .08 \\
										.08 & .92 \\
									\end{idxmat}}%
								% \hspace{-0.5em}~%
								};
							\node[% F (floomp) ...
								dpadded, inner sep=0.5em, circle, fill=black!08, fill opacity=1]
								(floomp) at (-\fignodedist,0) {$F$};
							\node[% G (gun) ...
								dpadded, inner sep=0.5em, circle, fill=black!08, fill opacity=1]
								(gun) at (\fignodedist,0) {$G$};

							\only<7>{ \draw[thick, ->, benchcolor2] (gun) -- (floomp); }
							\only<8>{ \draw[thick, ->, benchcolor2] (floomp) -- (gun); }

							\only<6->{\node[align=left] (incorporated) % show which active...
							 		at (0,-1.5)
								{ Incorporated:\\\Large
									\hspace{1em}
									\hl[benchcolor1]<6,8>{$\mu\ssub F$}
									\hspace{1em}
									\hl[benchcolor1]<6,7>{$\mu\ssub G$}
									\hspace{1em}
									\hl[benchcolor1]<8>{$p$}
									\hspace{1em}
									\hl[benchcolor1]<7>{$p'$}
								};\node[below=1em of incorporated]{};}

							\only<4-6>{		\node[text=alertcolor] at (0,+0.8){$p$??};		}
							\only<4,5>{ \fill[white,opacity=0.8] (-3, -0.8) rectangle (3,1.8); }
							\useasboundingbox (-2.7, -0.8) rectangle (2.7,1.8);
							\end{tikzpicture||precompiled}
					% \end{block}
					\vspace{-0.8em}
					\end{column}
				\only<2,3>{{\color{gray}\vrule}}
				\begin{onlyenv}<2->\begin{column}{0.95\textwidth-\bncolwidth}
					\only<6->{{~\hspace{-2em}~}}
					% \centering
					\begin{tikzpicture||precompiled}{fg-PDG}[]
						\def\fignodedist{1.5}
						\node[% for  "1"  /  "true"  ...
							dpadded, fill=gray!20, draw=gray!70, inner sep=0.35em, outer sep=0.37em]
							(true)  at (0,1.3) {$\pdgunit$};
						\node[dpadded] (floomp) at (-\fignodedist, 0) {$F$};
						\node[dpadded] (gun) at (\fignodedist, 0) {$G$};

						\begin{pgfonlayer}{foreground}
							\draw[arr1,{onslide=<6,8>{benchcolor1}}]
								(true.-165) -- %to[bend right=0]
									(floomp.60)
									node[pos=.5,{onslide=<6->{above left}}] (A)
										{\only<6->{$\mu\ssub F$}}
									;
							\draw[arr1,{onslide=<6,7>{benchcolor1}}]
								(true.-15) -- %to[bend left=0]
									(gun.120)
									node[pos=.5,{onslide=<6->{above right}}] (B)
									 	{\only<6->{$\mu\ssub G$}}
									;
							\end{pgfonlayer}

						\node[, % CPT for F...
							above left=1.5em and 2.5em of A.center, anchor=center] {%
							\only<5>{\color{alertcolor}}
							\alt<6->{}{
								\hspace{-0.8em}%
								\begin{idxmat}%[\color{black}\smalltext]
									{$\star$}{$f$, $\overline f$}
									.90 & .10 \\
								\end{idxmat}
								\hspace{-1em}~}
							};
						\node[, % CPT for G...
							above right=1.5em and 2.3em of B.center, anchor=center] {
							\only<5>{\color{alertcolor}}
							\alt<6->{}{
								\hspace{-0.8em}
								\begin{idxmat}
									%[\color{black}\smalltext]
									{$\star$}{$g$, $\overline g$}
									.05 & .95 \\
								\end{idxmat}
								\hspace{-1em}~}
							};
						\only<4->{ % Show p & arrows, after initial diagrams...
							\begin{pgfonlayer}{foreground}
								\draw[arr,
										onslide=<4>{heldout, dashed},
								 		{onslide=<8>{benchcolor1}},
										onslide=<5>{text=alertcolor} ]
								 	(floomp.-33) to[bend right=6] node[pos=0.65, fill=white, inner sep=2pt] (C) {$\smash{p}\vphantom{v}$} (gun.210);
								\draw[arr,
										onslide=<4>{heldout, dashed},
										{onslide=<7>{benchcolor1}},
										onslide=<5>{text=alertcolor} ]
								 	(gun.190) to[bend left=5] node[pos=0.668, fill=white, inner sep=2pt] {$\smash{p'}\vphantom{v}$} (floomp.-10);
								\end{pgfonlayer}
							}
						\only<6->{ \fill[white,opacity=0.8] (-2.6, -1) rectangle (2.7,2); }%
						\useasboundingbox (-2.7, -0.8) rectangle (2.7,2.0);
						\end{tikzpicture||precompiled}
					\vspace{-1em}
					\end{column}\end{onlyenv}
				\end{columns}
			\begin{itemize} %% bullet points
				\item<3-| alert@4> PDGs can incorporate arbitrary new probabilistic information
				\only<4>{ % New Information! The green block with cpts
					\vspace{0.7em} \color{black}
					\begin{exampleblock}{}
						You come to believe that Floomps and Guns share legal status (92\%).
						\vspace{-0.6em}
						$$ {\color{heldout}p(G \!\mid\! F)} =
							\begin{idxmat}[\smalltext]
									{$f$,$\overline f$}{$g$, $\overline g$}
								.92 & .08 \\ .08 & .92 \\
							\end{idxmat}
							~=~ {\left(\;{\color{heldout} p'(F \!\mid\! G)}\;\right)^{\textsf T}}$$
						\end{exampleblock}}
				\item<5-| alert@5> PDGs can be inconsistent
					\begin{itemize}
						\item<6- | alert@6-> \textellipsis but BNs must resolve inconsistency first, \\
							{\small\color{gray} which may \hl<7-8>[benchcolor2]{break symmetry}
								and irrecoverably lose information.} %joe1
							\note{and so it may be better to wait to resolve it.}
						\end{itemize}
				\end{itemize}
			\end{frame} %------------%

	\subsection{Capturing Bayesian Networks}
		\begin{frame} %%%%%%%%%        SMOKING: BN vs PDG         %%%%%%%%%%
			\frametitle{Bayesian Networks as PDGs}
			% \framesubtitle{Smoking and Cancer}
			\colorlet{heldout}{benchcolor1}
			\begin{center}
				\hfill
				\begin{tikzpicture||precompiled}[paperfig]{smoking-BN}
					\begin{scope} % BN Nodes...
						[every node/.style={dpadded, fill opacity=1,fill=black!08, circle, inner sep=2pt, minimum size=2em, draw=gray}]
						\node[onslide=<6>{opacity=0.2, text opacity=0.2}] (PS) at (0,0) {$\mathit{PS}$};
						\node (SH) at (1.5, 0.6) {$\mathit{SH}$};
						\node (S) at (1.5, -0.6) {$\mathit{S}$};
						\node (C) at (3, 0) {$\mathit{C}$};
						\end{scope}
					\draw[->,onslide=<6>{opacity=0.2}] (PS) to (S);
					\draw[->,onslide=<6>{opacity=0.2}] (PS) to (SH);
					\draw[->] (SH) to (C);
					\draw[->] (S) to (C);

					\only<6->{% Describe why restriction of BN is not a BN
						\node[below left=0.65 and 0.4 of PS,anchor=north west] (condBNtext)
						{\parbox{2.0in}{\small\color{benchcolor1!40!alertcolor}
							Must now give (unconditional) distributions on $\mathit{SH}$ and $\mathit{S}$, or distinguish them as ``observed'' nodes  (a \emph{conditional} BN). %
							}};%
						}
					\end{tikzpicture||precompiled}%
				\hfill\pause\only<-6>{{\color<6->{gray!50}\vrule}}\hfill%
				\onslide<-6>{
				\begin{tikzpicture||precompiled}[paperfig]{smoking-PDG}
					\onslide<5->{ % Matt for restriction
						\fill[fill opacity=0.1, blue!80!black, draw, draw opacity=0.5] (2.73,1.35) rectangle (6.8, -1.35);}

					\node[dpadded] (1) at (0,0) {$\pdgunit$};
					\node[dpadded] (PS) at (1.65,0) {$\mathit{PS}$};
					\node[dpadded, % (S) ...
					 	onslide=<5->{fill=black!.16, fill opacity=0.9}]
						(S) at (3.2, 0.8) {$S$};
					\node[dpadded, % (SH)...
					 	onslide=<5->{fill=black!.16, fill opacity=0.9}]
						(SH) at (3.35, -0.8) {$\mathit{SH}$};
					\node[dpadded, % (C) ...
					 	onslide=<5->{fill=black!.16, fill opacity=0.9}]
						(C) at (4.8,0) {$C$};

					\mergearr{SH}{S}{C} % duplicated below; this one is to get coordinates right
					\onslide<3>{ % Draw cpts attached to each edge...
						% \node;
						\begin{scope}[thick,benchcolor1,dashed]
							\draw[] ($(1)!0.4!(PS)$) -- ++(0,0.85)
								node[above] {$p(\mathit{PS})$};
							\draw[] ($(PS)!0.5!(S)$) -- ++(-0.4,1.1)
								node[above] {$p(\mathit{S}\!\mid\!\mathit{PS})$};
							\draw[] ($(PS)!0.48!(SH)$) -- ++(-0.6,-0.75)
								node[below left] {$p(\mathit{SH}\!\mid\!\mathit{PS})$};
							\draw[] ($(center-SHSC)!0.11!(S)$) -- ++(0.6,0.75)
								node[above right] {$p(\mathit{C}\!\mid\!\mathit{S}, \mathit{SH})$};
							\end{scope}
						}

					\draw[arr1] (1) -- (PS);
					\draw[arr2] (PS) -- (S);
					\draw[arr2] (PS) -- (SH);
					\mergearr{SH}{S}{C}

					\onslide<4->{ % Add Tanning Beds & arrow...
						\node[dpadded,
							 	onslide=<4>{fill=benchcolor1!36, fill opacity=0.75,
								 	draw=benchcolor1!20!black, dashed},
								onslide=<5->{fill=black!.16, fill opacity=0.9}]
							(T) at (6.25,0) {$T$};
						\draw[arr1,onslide=<4>{dashed,draw=benchcolor1!60!black}] (T) -- (C);
						}
					\onslide<5>{ % Draw matt & label for restriction...
						\draw[very thick, |-|, color=blue!50!black,text=black] (2.7, 1.35) --coordinate(Q) (6.83,1.35);%
						\fill[white] (2.6, 1.36) rectangle (7.0,1.55);
						\node[above=0.05em of Q]{\small Restricted PDG};
						}
					\onslide<6-7>{ % Dim this picture for BN description...
						\fill[white, opacity=0.8] (current bounding box.south west) rectangle (current bounding box.north east); }
					\end{tikzpicture||precompiled}
				}
				\hfill
			\end{center}
			\vspace{1em}
			\only<7->{%
				\begin{tikzpicture}[overlay,yshift=3.5em,xshift=2.3in]
					%        \pgftransformshift{\pgfpointanchor{current page}{center}}
					\begin{scope}
							[every node/.style={dpadded, fill opacity=1,fill=benchcolor2!10, circle, inner sep=2pt, minimum size=2em, draw=gray!50!benchcolor2}]

						\node[] (A) at (1,0) {$A$};
						\node[right=0.5 of A, fill opacity=0.4, dashed] (B) {$B$};
						\node[right=0.5 of B] (C) {$C$};
					\end{scope}

					\draw[arr] (A) -- (B);
					\draw[arr] (B) -- (C);
					\node[anchor=south west] at (-0.5,0.4) {\parbox{2.5in}{\small\color{benchcolor2}%
							Restriction in a qualitative BN is also problematic: leaving out information (the node B) results in a \emph{new} independence between $A$ and $C$.}};
				\end{tikzpicture}}%
			\pause
			In contrast with BNs:
			\begin{itemize}%[<+-| alert@+>]
				\item<+-| alert@+> The arrows of a PDG  correspond to the cpds;
				\item<+-| alert@+> We can incorporate new information about nodes that already have a
						cpd attached to them;
				\item<+-| alert@+> Arbitrary restrictions of PDGs are still PDGs.\\
					{\small\begin{itemize}
						\item<+-| alert@+-+(1)> The analog is false for BNs!
					\end{itemize}}
			\end{itemize}
			\end{frame}%------------%

	\subsection{Combining and Restricting PDGs}
		\begin{frame} %%%%%%%%%%         UNION OF PDGs         %%%%%%%%%%%%
			\frametitle{Combining PDGs}
			% \framesubtitle{Smoking and Cancer}
			\colorlet{heldout}{benchcolor1}
				\colorlet{colorsmoking}{blue!50!black}
				\colorlet{colororiginal}{benchcolor1!85!black}
				\tikzset{hybrid/.style={postaction={draw,colorsmoking,dash pattern= on 5pt off 8pt,dash phase=6.5pt,thick},
					draw=colororiginal,dash pattern= on 5pt off 8pt,thick}}
			\begin{center}
					\begin{tikzpicture||precompiled}
							[center base, thick, draw=colororiginal, text=black]{grok-pre}

						\node[dpadded] (C) at (0,0) {$C$};
						\node[dpadded] (T) at (1.5,0){$T$};
						\node[dpadded] (SL) at (.75,-1.5){$\it SL$};

						\draw[arr] (T) to[bend right] node[above]{$q$} (C);
						\mergearr{C}{T}{SL}
						\end{tikzpicture||precompiled}
				\only<1-3>{
						\vspace{0.7em}
						\begin{exampleblock}{Grok wants to be supreme leader ($\mathit{SL}$).}

						\begin{itemize}[<+->]
							\item She notices that those who use tanning beds have more power,\\[-0.4em]
							\item \textellipsis but mom says $q(C \mid T) = \begin{idxmat}
								{$t$,$\overline t$}{$c$,$\overline c$}
									.15 & .85 \\ .02 & .98
								\end{idxmat}$.\\[0.9em]
							\item Grok worries getting cancer from a tanning bed will make $\mathit{SL}$ impossible.
						\end{itemize}
						\end{exampleblock}
					}
				\pause
				{\Large$\boldsymbol+$}
				% \hfill{\Large$+$}\hfill
				\begin{tikzpicture||precompiled}[paperfig, text=black]{}
					\fill[fill opacity=0.1, blue!80!black, draw, draw opacity=0.5]
					 	(-2.07,1.35) rectangle (2.07, -1.35);

					% \begin{scope}
						\node[dpadded, fill=black!.16, fill opacity=0.9] (C) at (0,0) {$C$};
						\node[dpadded, fill=black!.16, fill opacity=0.9] (T) at (1.6,0){$T$};
						\node[dpadded, fill=black!.16, fill opacity=0.9] (S) at (-1.4, 0.8) {$S$};
						\node[dpadded, fill=black!.16, fill opacity=0.9] (SH) at (-1.45, -0.8) {$\mathit{SH}$};
						% \end{scope}

					\draw[arr1] (T) to node[above]{$p$} (C);
					\mergearr{S}{SH}{C}
					\end{tikzpicture||precompiled}
				% \hfill%
				\pause
				{\Large$\boldsymbol=$~}
				% \hfill%
				\begin{tikzpicture||precompiled}[paperfig]{grok-post}
					\begin{scope}[postaction={draw,colorsmoking,dash pattern= on 3pt off 5pt,dash phase=4pt,thick}]

						\node[dpadded,hybrid] (C) at (0,0) {$C$};
						\node[dpadded,hybrid] (T) at (2,0){$T$};
						\end{scope}

					\begin{scope}[thick, draw=colororiginal, text=black]
						\node[dpadded] (SL) at (1,-1.5){$\it SL$};
						\draw[arr] (T) to[bend right] node[above]{$q$} (C);
						\mergearr{C}{T}{SL}
						\end{scope}

					\begin{scope}[thick, draw=colorsmoking, text=black]
						\node[dpadded] (S) at (-1.4, 0.8) {$S$};
						\node[dpadded] (SH) at (-1.45, -0.8) {$\mathit{SH}$};
						\draw[arr] (T) to node[fill=white, fill opacity=1,text opacity=1,inner sep=1pt]{$p$} (C);
						\mergearr{S}{SH}{C}
						\end{scope}
					\end{tikzpicture||precompiled}
				\end{center}
			\vspace{1em}
			\begin{itemize}
				\item Arbitrary PDGs may be combined without loss of information
				\item They may have parallel edges (e.g., $p,q$), which directly conflict.
				\end{itemize}

			\end{frame}%------------%


\section{Formalism and Technical Results}
	\colorlet{hypergraphcolor}{benchcolor1!85!black}
	\colorlet{simplegraphcolor}{structurecolor}
	\begin{frame} %%%%%         HYPER-GRAPHS AND GRAPHS      %%%%%%
		\frametitle{{\color{hypergraphcolor}Hyper-graphs?} Or merely {\color{simplegraphcolor!85}graphs}?}
		\hfill
		\begin{tikzpicture||precompiled}[center base,draw=hypergraphcolor]{grok-pre}
			\fill[fill opacity=0.07,hypergraphcolor, draw, draw opacity=0.2]
				(-0.6,0.6) rectangle (2.1, -2.1);

			\node[dpadded] (C) at (0,0) {$C$};
			\node[dpadded] (T) at (1.5,0){$T$};
			\node[dpadded] (SL) at (.75,-1.5){$\it SL$};

			\draw[arr] (T) to[bend right]  (C);
			\alert<2>{ \mergearr{C}{T}{SL} }
			% \drawbb
			\end{tikzpicture||precompiled}
		\onslide<2->{
			\hfill
			\begin{tikzpicture||precompiled}[center base]{widget}%[center base]
			\fill[fill opacity=0.07,simplegraphcolor, draw, draw opacity=0.2]
				(-2.1,-1.85) rectangle (2.1, 1.6);

				\node[dpadded] (SL) at (0,-1.3) {$\mathit{SL}$};

				\node[dpadded] (C) at (-1.5,1) {$C$};
				\node[dpadded] (T) at (1.5,1) {$T$};

				\alert<2>{
					\node[dpadded,light pad] (CT) at (0, 0){$\scriptstyle C \times T$};
					\draw[arr1, ->>] (CT) -- (C);
					\draw[arr1, ->>] (CT) -- (T);
					\draw[arr1] (CT) -- (SL);
					}
				\draw[arr] (T) to [bend right=15] (C);
				% \drawbb
				\end{tikzpicture||precompiled}
			}
			\hfill~
		\onslide<3->{
			\vspace{1em}
			\begin{itemize}
				\item<3-|alert@+> This widget expands state space, but graphs are simpler.
				\item<4-> \alert<4>{There is a natural correspondence}
				\[ \text{\color{hypergraphcolor} joint distributions}\quad\leftrightarrows\quad\parbox{15em}{\color{simplegraphcolor}\centering expanded joint distributions\\ satisfying coherence constraints} \]
			\end{itemize}
			}
		\onslide<6->
			{\small\color{gray} (working directly with hypergraphs is also possible)}
		\end{frame} %----------

	\newlength{\pdgdefnwidth}
	\begin{frame} %%%%%%%%%%%       Definition of a PDG          %%%%%%%%
		% \frametitle{Formal Definition}
		\alt<-8>{\colorlet{notationcolor}{benchcolor2}}
			{\colorlet{notationcolor}{benchcolor2!40!alertcolor}}

		\only<9->{
			\setbeamercolor{block body}{bg=structurecolor!5!black}
			\setbeamercolor{block title}{bg=structurecolor!80!black,fg=structurecolor!30!white}	}
		\setlength{\pdgdefnwidth}{\textwidth}
		\only<9->{\setlength{\pdgdefnwidth}{0.7\textwidth}}
		\begin{columns}[t]
		\hfill
		\column{\pdgdefnwidth}
		\begin{defn}[\alt<-8>{Probabilistic Dependency Graph}{PDG}]\label{def:model}
			\only<-8>{A PDG is a tuple $\dg M =
			(\N,\Ed,\V,\mat p, \alpha, \beta)$,\pause\ where}
			\begin{description}%
				\item[$\N$]<+-| alert@9-13> \notation{$:\Set$}%
					\alt<-8>{is a finite set of nodes (variables)}{\hfill (node set)}
					\begin{description}
						\item[$\V$]<+-| hideme@10,11> \notation{$:\N \to \Set$}<-9,12-13>%
							\alt<-8>{gives a set $\V(X)$ of possible values for each $X$;}{\hfill (node values)}%
							\extra<3>[anchor=north east, align=right]{
								$\displaystyle \V(\dg M) := \prod_{X \in \N} \V(X)\qquad$ is the set of
								 	possible \\[-0.6em] joint variable settings.		}
						\end{description}

				\item[$\Ed$]<+-| hideme@9 |alert@10-13> \notation{$\subseteq \N \times \N \times \mathit{Label}~~~$}<-8,10->%
					\alt<-8>{is a set of labeled edges $\{ \ed LXY \}$,\\}{\hfill (edge set)\\[0.14em]}
					\pause[\thebeamerpauses]
					\alt<-8>{and associated to each $\ed LXY$, there is:}{{\color{gray}For $\ed LXY \in \Ed$,}}
					%, each with a source $X$ and target $Y$ in $\N$;

					\pause
					\begin{description}%[<+-| alert@+>]
						\item[$\bp$]<+-|hideme@9-11 | alert@12-13> %:\big(\!(X,Y,\ell)\in\!\Ed \big) \to
							\notation{$:\V(X) \to \Delta\V(Y)$}<-8,12-13>%
							\alt<-8>{a cpd $\bp(Y \mid X)$;}{\hfill (edge cpd)}

						\item[$\alpha\ssub L$]<+-| hideme@9-10,12-13> \notation{$: [0,1]$}<-8,11>%
							\alt<-8>{a confidence that $Y$ is a (noisy) function of $X$;}{\hfill(qual. edge  confidence)}
						\item[$\beta\ssub L$]<+-| hideme@9-13> \notation{$: \mathbb R^+$}<-8>%
							\alt<-8>{a confidence in the reliability of	$\bp$.}{\hfill(quant. edge confidence)}
						\end{description}

				% \item[$\mat p$] \notation{$:\big(\!({A,B,\ell})\colon\!\Ed \big) \to \V(A) \to \Delta\V(B)$}%
				% 	associates to each edge $\ed LXY \in \Ed$
				% 	a distribution $\bp(x)$ on $Y$ for each $x \in \V(X)$;
				%
				% \item[$\alpha$] \notation{$:\Ed \to [0,1]$}%
				% 	associates to each edge $\ed LXY$ a non-negative number $\alpha_L$ which,
				% 	roughly speaking, is the modeler's confidence in the functional
				% 	dependence of $Y$ on $X$ implicit in $L$;
				% \item[$\beta$] \notation{$:\Ed \to \mathbb R^+$}%
				% 	associates to each edge $L$ a positive real number $\beta_L$,
				% 	the modeler's subjective confidence in the reliability of	$\bp$.
				\end{description}
			\end{defn}
			\column{\textwidth-\pdgdefnwidth}
			\end{columns}
			\vspace{1em}
			\only<+->{
				\begin{itemize}
					\onslide<9>{\item<+-|alert@+> $(\N, \V) \cong $ \texttt{Set<Variable>}\\[-1em]}
					\item<+-|alert@+> $(\N, \Ed) \cong $ \texttt{MultiGraph}
					\item<+-|alert@+> $(\N, \Ed, \alpha)$ is a qualitative PDG.
					\item<+-> \alert<.>{We call $(\N, \Ed, \V, \mat p)$ an \emph{unweighted} PDG}
					% \only<+>{
						\begin{itemize}
								\item and give it semantics as though $\alpha_L = \beta_L = 1$.
								% \item $(\N, \Ed, \V)$ are (mostly) implicit in $\mat p$,
								% 	and so \\ ``collection of cpds'' $\cong$ \texttt{UnweightedPDG}.
							\end{itemize}
							% }
							% \only<+>{
							% 	\vspace{-3.5em}
							% 	\begin{alertblock}{Aside}
							% 		An unweighted PDG is a functor
							% 		$\langle \mat p, \V\rangle\colon \mathit{Free}(\N, \Ed) \to \mathbf{Mark}$
							% 	\end{alertblock}
							% }
					\end{itemize}
					\begin{alertblock}<+>{Aside}
						An unweighted PDG is a functor
						$\langle \mat p, \V\rangle\colon \mathit{Free}(\N, \Ed) \to \mathbf{Mark}$
					\end{alertblock}
				}
			\begin{columns}
				\hfill
				\column{0.8\textwidth}

			\end{columns}

		\end{frame}

	\begin{frame}<1-4>[label=semantics] %%%%%%%%%          SEMANTICS           %%%%%%%%%%%%
		\frametitle{PDG Semantics}
		{	\setbeamersize{description width=1.2cm}
			\setbeamercovered{transparent=30}
			\begin{description}
				\item<uncover@1,2,7,8> [\alert<2,7,8>{$\SD{\dg M}$}] %\notation{$:\mathcal P{\Delta \V(\dg M)}$}
					The set of joint distributions consistent with $\dg M$;
					\only<2-6>{\visible<2->{\uncover<2>{
						\[ \Big\{ \mu%~{\color{gray!60} \in \Delta[\V(\dg M)]}~
						 	\in \Delta[\V(\dg M)]:~\text{for all } \ed LXY \in \Ed.~~\mu(Y\!\mid\!X) = \bp(Y\!\mid\! X)  \Big\} \]
						}}}
				\item<uncover@1,3,7> [\alert<3,7>{$\bbr{\dg M}_\gamma$}] %\notation{$:{\Delta \V(\dg M)} \to \mathbb R$}
					\alt<1>{A function, scoring distributions by}{
						A loss function (parameterized by $\gamma$), scoring a joint distribution's}
					 compatibility with $\dg M$;

					\only<2-6>{\visible<3->{\uncover<3>{
						\alt<-6>{ \[
							\bbr{\dg M}_\gamma(\mu) :=
								{\color{benchcolor1}\underbrace{\color{black}
									\Inc_{\dg M}(\mu) }_{\parbox{1in}%
										{\centering Incompatibility\\(quantitative)}}} +
								{\color{benchcolor2}\underbrace{\color{black}
									\mathllap{\gamma\;} \IDef{\dg M}(\mu) }_{\parbox{1.3in}%
										{\centering	Information Deficit \\  (qualitative)}}}
							\]}{\[
								\bbr{\dg M}_\gamma(\mu) := \Inc_{\dg M}(\mu) + \gamma\;	\IDef{\dg M}(\mu)
						\] }}}}

				\item<uncover@1,4-6,8> [\alert<4-6,8>{$\bbr{\dg M}^*$}] %\notation{$:{\Delta \V(\dg M)}$}
					The \only<6>{{\color{benchcolor1}(unique)}} ``best'' joint distribution\only<6>{{\small\color{benchcolor1}~(in the quantitative limit)}}.
					\only<2-6>{\visible<4-6>{
						\[ \bbr{\dg M}\only<4-5>{_\gamma}^* = \only<6>{{\color{benchcolor1}\lim_{\gamma\to 0}}} \argmin_\mu \bbr{\dg M}_\gamma(\mu) \]
						}}
			\end{description}	}

			% \only<1> {
			%
			% 	}
			\only<7->{
				\begin{prop}[{\normalsize\it the second semantics extends the first}]
						$\SD{\dg M} \!= \big\{ \mu : \bbr{\dg M}_0(\mu) \!=\! 0 \big\}$.
					\end{prop}

				\onslide<8->{
					\begin{prop}[{\normalsize\it the third semantics is a member of the first}]\label{prop:consist}
							$\bbr{\dg M}^* \in \bbr{\dg M}_0^*$, so if $\dg M$ is consistent,
							then $\bbr{\dg M}^* \in \SD{\dg  M}$.
						\end{prop}
					}
			}
		\end{frame}

	\colorlet{localcolor}{Lavender}
	\colorlet{globalcolor}{Sepia}
	\begin{frame}[c] %%%
		\frametitle{The Scoring Function}
		\[ \bbr{\dg M}_\gamma(\mu) := \alert<2-4>{\Inc_{\dg M}(\mu)}
			+ \gamma\;\alert<5->{\IDef{\dg M}(\mu)} \]

		\only<1-4>{{
			\setbeamercolor{block title}{bg=benchcolor1!50}
			\setbeamercolor{block body}{bg=benchcolor1!20}
			\begin{defn}[$\Inc$]<2->\label{def:inc}
			The \emph{incompatibility} of a
			a joint distribution $\mu$ with $\dg M$ is given by
			{\setbeamercovered{transparent}
			\alt<-4>{ \[ % The simpler, less clear notation
					\Inc_{\dg M}(\mu) :=
						\sum_{\ed LXY} \onslide<3->{\beta_L} \;
						\tikzmark{relentD}
						\kldiv{ \mu_{Y|X} }{ \bp }
				\] }{ \[ % The notation used in our paper
					\Inc_{\dg M }( \mu) :=
						\sum_{\mathclap{\ed LXY}} \beta_L \Ex_{x \sim \mu_{_X}}
						\tikzmark{relentD}
						\kldiv[\Big]{ \mu(Y \mid X \!=\! x) }{\bp(x) }. \] }
					}
			\extra<3>[name=Dexplain, below=1cm of pic cs:relentD, align=right,
						fill=benchcolor1!40!structurecolor!20!white]{%
					$\displaystyle\kldiv\mu\nu = \sum_{\mathclap{w \in \mathop{Supp}(\mu)}} \mu(w) \log \frac{\mu(w)}{\nu(w)}$
					is the relative entropy \\[-0.8em] from $\nu$ to $\mu$.
				}
			\only<3>{
				\tikzro \draw ([xshift=0.5em]pic cs:relentD) -- ([xshift=0.8em]Dexplain); }

			\only<-4>{
				\onslide<4>{
					The \emph{inconsistency} of $\dg M$, is the smallest possible incompatibility,
					\[ \Inc(\dg M) = \inf_{ \mu \in \Delta\V(\dg M)} \Inc_{\dg M}(\mu) . \]
					}}
			\end{defn}
			}}
		\only<5->{{
			\setbeamercolor{block title}{bg=benchcolor2!50}
			\setbeamercolor{block body}{bg=benchcolor2!20}
			\begin{defn}[$\IDef{}$]
			The \emph{information deficit} of a distribution $\mu$ with respect to $\dg M$ is
			\vspace{3.5em}
			\def\idefdef{\sum_{\ed LXY} \alpha_L \H_\mu(Y\mid X)}
			\[ \IDef{\dg M}(\mu) :=
				\alt<6>{{\color{localcolor} \overbrace{\idefdef}^{	\smash{
						\extra[above=0.05em of call point,anchor=south,align=center,
							name=idefseparate,
							fill=structurecolor!20!localcolor!40!white]
								{\# bits required to separately
							 	determine\\ each target, knowing the source}
						\tikzro \draw (call point) -- (idefseparate);
				 	}}}}{ \idefdef }
					-
				\alt<6>{{\color{globalcolor}\underbrace{\H(\mu)}_{\smash{
						\extra[below right=0.5em and 2em of call point,anchor=north east,name=entropy,
							fill=structurecolor!20!globalcolor!40!white]
								{\# bits needed to determine all variables}
						\tikzro \draw (call point) -- (entropy);
					}}}}{ \H(\mu) }.  \]
				\vspace{3em}
			\end{defn}	}}
		\end{frame}

	\begin{frame}\frametitle{Illustrations of $\IDef{}$}
  	\def\vsize{0.4}
		\def\bnslide{4}
  	\def\spacerlength{0.5em}
		\begin{tikzpicture}[center base]\label{subfig:justX-0}
			\node[dpad0] (X) at (0,1){$X$};
			\draw[fill=green!50!black]  (0,0) circle (\vsize)  ++(-90:.22) node[label=below:\tiny$X$]{};
			\useasboundingbox (current bounding box);
			\node at (-0.5, 0.6){};
			\end{tikzpicture}
		\begin{tabular}{c}
		\begin{tikzpicture}[onslide=<\bnslide>{is bn}]\label{subfig:justX-1}
			\node[dpad0] (1) at (-0.4,.85){$\!\pdgunit\!$};
			\node[dpad0] (X) at (0.4,.85){$X$};
			\draw[arr1] (1)  -- (X);
			\draw[fill=white!70!black]  (0,0) circle (\vsize) ++(-90:.22) node[label=below:\tiny$X$]{};
			\node at (-0.6,0.35){};
			\useasboundingbox (current bounding box);
			\node at (-0.7, 0.35){};
			\end{tikzpicture} \\[0.5em]
		\begin{tikzpicture}\label{subfig:justX-2}
			\node[dpad0] (1) at  (-0.45,.85){$\!\pdgunit\!$};
			\node[dpad0] (X) at  (0.45,.85){$X$};
			\draw[arr1] (1) to[bend left=20] (X);
			\draw[arr1] (1) to[bend right=20] (X);
			\draw[fill=red!50!black] (0,0) circle (\vsize) ++(-90:.22) node[label=below:\tiny$X$]{};
			\useasboundingbox (current bounding box);
			\node at (-0.7, 0.35){};
			\end{tikzpicture}
		\end{tabular}%}
		\hspace{\spacerlength}\pause\vrule\hspace{\spacerlength}
		%% EXAMPLE: X  Y
		% \adjustbox{valign=b}{
		\begin{tabular}{c}
		\begin{tikzpicture}[]  \label{subfig:justXY}
			% \node[dpad0] (1) at (0,2){$\pdgunit$};
			\node[dpad0] (X) at (-0.45,.85){$X$};
			\node[dpad0] (Y) at (0.45,.85){$Y$};
			\path[fill=green!50!black] (-0.2,0) circle (\vsize) ++(-110:.23) node[label=below:\tiny$X$]{};
			\path[fill=green!50!black] (0.2,0) circle (\vsize) ++(-70:.23) node[label=below:\tiny$Y$]{};
			\begin{scope}
				\clip (-0.2,0) circle (\vsize);
				\clip (0.2,0) circle (\vsize);
				\fill[green!50!black] (-1,-1) rectangle (3,3);
				% \draw[ultra thick,white] (-0.2,0) circle (\vsize);
				% \draw[ultra thick,white] (0.2,0) circle (\vsize);
			\end{scope}
			\draw (-0.2,0) circle (\vsize);
			\draw (0.2,0) circle (\vsize);
			\useasboundingbox (current bounding box);
			\node at (-0.8, 0.4){};
			\end{tikzpicture}\\[0.5em]
		%% EXAMPLE: X -> Y
		\begin{tikzpicture}[]\label{subfig:XtoY}
			% \node[dpad0] (1) at (0,2){$\pdgunit$};
			\node[dpad0] (X) at (-0.45,0.85){$X$};
			\node[dpad0] (Y) at (0.45,0.85){$Y$};
			\draw[arr1] (X) to[] (Y);
			% \draw[arr] (1) to[] (Y);
			\path[fill=green!50!black] (-0.2,0) circle (\vsize) ++(-110:.23) node[label=below:\tiny$X$]{};
			\path[fill=white!70!black] (0.2,0) circle (\vsize) ++(-70:.23) node[label=below:\tiny$Y$]{};
			\begin{scope}
				\clip (-0.2,0) circle (\vsize);
				\clip (0.2,0) circle (\vsize);
				\fill[green!50!black] (-1,-1) rectangle (3,3);
				% \draw[ultra thick,white] (-0.2,0) circle (\vsize);
				% \draw[ultra thick,white] (0.2,0) circle (\vsize);
			\end{scope}
			\draw (-0.2,0) circle (\vsize);
			\draw (0.2,0) circle (\vsize);
			\useasboundingbox (current bounding box);
			\node at (-0.8, 0.4){};
			\end{tikzpicture}
		\end{tabular}%}
		% \hspace{\spacerlength}
		\begin{tabular}{c}
		%% EXAMPLE: X <-> Y
		\begin{tikzpicture}[center base]\label{subfig:XY-cycle}
			% \node[dpad0] (1) at (0,2){$\pdgunit$};
			\node[dpad0] (X) at (-0.45,0.85){$X$};
			\node[dpad0] (Y) at (0.45,0.85){$Y$};
			\draw[arr1] (X) to[bend left] (Y);
			\draw[arr1] (Y) to[bend left] (X);
			\draw[fill=white!70!black] (-0.2,0) circle (\vsize) ++(-110:.25) node[label=below:\tiny$X$]{};
			\draw[fill=white!70!black] (0.2,0) circle (\vsize) ++(-70:.25) node[label=below:\tiny$Y$]{};
			\begin{scope}
				\clip (-0.2,0) circle (\vsize);
				\clip (0.2,0) circle (\vsize);
				\fill[green!50!black] (-1,-1) rectangle (3,3);
				% \draw[ultra thick,white] (-0.2,0) circle (\vsize);
				% \draw[ultra thick,white] (0.2,0) circle (\vsize);
			\end{scope}
			\draw (-0.2,0) circle (\vsize);
			\draw (0.2,0) circle (\vsize);
			\useasboundingbox (current bounding box.south west) rectangle (current bounding box.north east);
			\node at (-0.85, 0.4){};
			\end{tikzpicture}\\[2.5em]
		% \hspace{\spacerlength}%% EXAMPLE: 1 -> Y;1->X
		\begin{tikzpicture}[center base, onslide=<\bnslide>{is bn}] \label{subfig:XYindep}
			\node[dpad0] (1) at (0,0.75){$\!\pdgunit\!$};
			\node[dpad0] (X) at (-0.7,0.95){$X$};
			\node[dpad0] (Y) at (0.7,0.95){$Y$};
			\draw[arr0] (1) to[] (X);
			\draw[arr0] (1) to[] (Y);
			\draw[fill=white!70!black] (-0.2,0) circle (\vsize) ++(-110:.23) node[label=below:\tiny$X$]{};
			\draw[fill=white!70!black] (0.2,0) circle (\vsize) ++(-70:.23) node[label=below:\tiny$Y$]{};
			\begin{scope}
				\clip (-0.2,0) circle (\vsize);
				\clip (0.2,0) circle (\vsize);
				\fill[red!50!black] (-1,-1) rectangle (3,3);
				% \draw[ultra thick,white] (-0.2,0) circle (\vsize);
			% \draw[ultra thick,white] (0.2,0) circle (\vsize);
			\end{scope}
			\draw (-0.2,0) circle (\vsize);
			\draw (0.2,0) circle (\vsize);
			\useasboundingbox (current bounding box.south west) rectangle (current bounding box.north east);
			\node at (-0.88, 0.4){};
			\end{tikzpicture}
		\end{tabular}
		\hspace{\spacerlength}
		 %% EXAMPLE: 1 -> X -> Y
		\begin{tikzpicture}[center base, onslide=<\bnslide>{is bn}]\label{subfig:1XY}
			\node[dpad0] (1) at (0.15,2){$\!\pdgunit\!$};
			\node[dpad0] (X) at (-0.45,1.4){$X$};
			\node[dpad0] (Y) at (0.35,1){$Y$};
			\draw[arr0] (1) to[] (X);
			\draw[arr1] (X) to[] (Y);
			\path[fill=white!70!black] (-0.2,0) circle (\vsize) ++(-110:.23) node[label=below:\tiny$X$]{};
			\path[fill=white!70!black] (0.2,0) circle (\vsize) ++(-70:.23) node[label=below:\tiny$Y$]{};
			\begin{scope}
				\clip (-0.2,0) circle (\vsize);
				\clip (0.2,0) circle (\vsize);
				% \fill[red!50!black] (-1,-1) rectangle (3,3);
				% \draw[ultra thick,white] (-0.2,0) circle (\vsize);
				% \draw[ultra thick,white] (0.2,0) circle (\vsize);					\end{scope}
			\end{scope}
			\draw (-0.2,0) circle (\vsize);
			\draw (0.2,0) circle (\vsize);
			\useasboundingbox (current bounding box);
			\node at (-0.7, 0.6){};
			\end{tikzpicture}
		% \hspace{\spacerlength}\hspace{2.5pt}\vrule\hspace{2.5pt}\hspace{\spacerlength}

		\pause
		%% EXAMPLE: 1 -> X -> Y -> Z
		\begin{tikzpicture}[center base, onslide=<\bnslide>{is bn}] \label{subfig:1XYZ}
			% \node[dpad0] (1) at (-0.5,2.3){$\!\pdgunit\!$};
			% \node[dpad0] (X) at (-0.5,1.5){$X$};
			% \node[dpad0] (Y) at (0.35,1.25){$Y$};
			% \node[dpad0] (Z) at (0.25,2.25){$Z$};
			\node[dpad0] (1) at (-1,0.8){$\!\pdgunit\!$};
			\node[dpad0] (X) at (-0.6,1.6){$X$};
			\node[dpad0] (Y) at (0.35,1.6){$Y$};
			\node[dpad0] (Z) at (1.0,0.9){$Z$};
			\draw[arr0] (1) to (X);
			\draw[arr1] (X) to[] (Y);
			\draw[arr1] (Y) to[] (Z);
			\path[fill=white!70!black] (210:0.22) circle (\vsize) ++(-130:.25) node[label=below:\tiny$X$]{};
			\path[fill=white!70!black] (-30:0.22) circle (\vsize) ++(-50:.25) node[label=below:\tiny$Y$]{};
			\path[fill=white!70!black] (90:0.22) circle (\vsize) ++(40:.29) node[label=above:\tiny$Z$]{};
			\begin{scope}
				\clip (90:0.22) circle (\vsize);
				\clip (210:0.22) circle (\vsize);
				\fill[red!50!black] (-1,-1) rectangle (3,3);
				% \draw[ultra thick,white] (210:0.2) circle (\vsize);
				% \draw[ultra thick,white] (90:0.2) circle (\vsize);
				\clip (-30:0.22) circle (\vsize);
				\fill[white!70!black] (-1,-1) rectangle (3,3);
				% \draw[ultra thick,white] (-30:0.2) circle (\vsize);
				% \draw[ultra thick,white] (210:0.2) circle (\vsize);
				% \draw[ultra thick,white] (90:0.2) circle (\vsize);
			\end{scope}
			\begin{scope}
				\draw[] (-30:0.22) circle (\vsize);
				\draw[] (210:0.22) circle (\vsize);
				\draw[] (90:0.22) circle (\vsize);
			\end{scope}
			\useasboundingbox (current bounding box);
			\node at (-0.7, 0.7){};
			\end{tikzpicture}
		%% EXAMPLE: X -> Y -> Z -> X
		\hspace{\spacerlength}
		\begin{tikzpicture}[center base] \label{subfig:XYZ-cycle}
			% \node[dpad0] (1) at (-0.5,2.3){$\pdgunit$};
			\node[dpad0] (X) at (-0.5,1.75){$X$};
			\node[dpad0] (Y) at (0.35,1.25){$Y$};
			\node[dpad0] (Z) at (0.25,2.25){$Z$};
			% \draw[arr0] (1) to (X);
			\draw[arr1] (X) to[bend right=25] (Y);
			\draw[arr1] (Y) to[bend right=25] (Z);
			\draw[arr1] (Z) to[bend right=25] (X);
			%option: -- either X -> Y -> Z -> X, or <-> Y <-> Z <-> X. For the latter, uncomment the 6 lines below and comment out the next 3.
			% \draw[arr1] (Z) to[bend left=5] (Y);
			% \draw[arr1] (Y) to[bend left=5] (X);
			% \draw[arr1] (X) to[bend left=5] (Z);
			% \draw[fill=red!50!black] (210:0.22) circle (\vsize) ++(-130:.27) node[label=below:\tiny$X$]{};
			% \draw[fill=red!50!black] (-30:0.22) circle (\vsize) ++(-50:.27) node[label=below:\tiny$Y$]{};
			% \draw[fill=red!50!black] (90:0.22) circle (\vsize) ++(140:.31) node[label=above:\tiny$Z$]{};

			% grey filling for one covering.
			\draw[fill=white!70!black] (210:0.22) circle (\vsize) ++(-130:.27) node[label=below:\tiny$X$]{};
			\draw[fill=white!70!black] (-30:0.22) circle (\vsize) ++(-50:.27) node[label=below:\tiny$Y$]{};
			\draw[fill=white!70!black] (90:0.22) circle (\vsize) ++(40:.31) node[label=above:\tiny$Z$]{};

			\begin{scope}
				\clip (-30:0.22) circle (\vsize);
				\clip (210:0.22) circle (\vsize);
				% \fill[white!70!black] (-1,-1) rectangle (3,3);
				\clip (90:0.22) circle (\vsize);
				\fill[green!50!black] (-1,-1) rectangle (3,3);
			\end{scope}
			\begin{scope}
				\draw[] (-30:0.22) circle (\vsize);
				\draw[] (210:0.22) circle (\vsize);
				\draw[] (90:0.22) circle (\vsize);
			\end{scope}
			\useasboundingbox (current bounding box);
			\node at (-0.7, 0.7){};
			\end{tikzpicture}
		%% EXAMPLE: X -> Y <- Z
		\hspace{\spacerlength}
		\begin{tikzpicture}[center base] \label{subfig:XZtoY}
			% \node[dpad0] (1) at (-0.5,2.3){$\pdgunit$};
			\node[dpad0] (X) at (-0.45,1.9){$X$};
			\node[dpad0] (Y) at (0.3,1.25){$Y$};
			\node[dpad0] (Z) at (0.4,2.15){$Z$};
			% \draw[arr0] (1) to (X);
			\draw[arr0] (X) to[] (Y);
			\draw[arr1] (Z) to[] (Y);
			\path[fill=green!50!black] (210:0.22) circle (\vsize) ++(-130:.25) node[label=below:\tiny$X$]{};
			\path[fill=red!50!black] (-30:0.22) circle (\vsize) ++(-50:.25) node[label=below:\tiny$Y$]{};
			\path[fill=green!50!black] (90:0.22) circle (\vsize) ++(40:.29) node[label=above:\tiny$Z$]{};
			\begin{scope}
				\clip (-30:0.22) circle (\vsize);
				\clip (90:0.22) circle (\vsize);
				\fill[white!70!black] (-1,-1) rectangle (3,3);
			\end{scope}
			\begin{scope}
				\clip (-30:0.22) circle (\vsize);
				\clip (210:0.22) circle (\vsize);
				\fill[white!70!black] (-1,-1) rectangle (3,3);

				\clip (90:0.22) circle (\vsize);
				\fill[green!50!black] (-1,-1) rectangle (3,3);
				% \draw[ultra thick,white] (210:0.2) circle (\vsize);
				% \draw[ultra thick,white] (90:0.2) circle (\vsize);
				% \draw[ultra thick,white] (-30:0.2) circle (\vsize);
				% \draw[ultra thick,white] (210:0.2) circle (\vsize);
				% \draw[ultra thick,white] (90:0.2) circle (\vsize);
			\end{scope}
			\draw[] (-30:0.22) circle (\vsize);
			\draw[] (210:0.22) circle (\vsize);
			\draw[] (90:0.22) circle (\vsize);
			\useasboundingbox (current bounding box);
			% \node at (-0.7, 0.7){};
			\end{tikzpicture}
		%% EXAMPLE: X <-> Y <-> Z
		\hspace{\spacerlength}
		\begin{tikzpicture}[center base] \label{subfig:XYZ-bichain}
			% \node[dpad0] (1) at (0.1,2.4){$\pdgunit$};
			\node[dpad0] (X) at (-1,1.2){$X$};
			\node[dpad0] (Y) at (0,1.7){$Y$};
			\node[dpad0] (Z) at (1,1.4){$Z$};
			% \draw[arr1] (1) to (X);
			% \draw[arr1] (1) to (Y);
			\draw[arr1] (X) to[bend right=15] (Y);
			\draw[arr1] (Y) to[bend right=15] (X);
			\draw[arr1] (Y) to[bend right=15] (Z);
			\draw[arr1] (Z) to[bend right=15] (Y);
			\path[fill=white!70!black] (210:0.22) circle (\vsize) ++(-130:.25) node[label=below:\tiny$X$]{};
			\path[fill=red!50!black] (-30:0.22) circle (\vsize) ++(-50:.25) node[label=below:\tiny$Y$]{};
			\path[fill=white!70!black] (90:0.22) circle (\vsize) ++(40:.29) node[label=above:\tiny$Z$]{};
			\begin{scope}
				\clip (-30:0.22) circle (\vsize);
				\clip (90:0.22) circle (\vsize);
				\fill[white!70!black] (-1,-1) rectangle (3,3);
			\end{scope}
			\begin{scope}
				\clip (90:0.22) circle (\vsize);
				\clip (210:0.22) circle (\vsize);
				\fill[red!50!black] (-1,-1) rectangle (3,3);
			\end{scope}
			\begin{scope}
				\clip (-30:0.22) circle (\vsize);
				\clip (210:0.22) circle (\vsize);
				\fill[white!70!black] (-1,-1) rectangle (3,3);

				\clip (90:0.22) circle (\vsize);
				\fill[green!50!black] (-1,-1) rectangle (3,3);
				% \draw[ultra thick,white] (210:0.2) circle (\vsize);
				% \draw[ultra thick,white] (90:0.2) circle (\vsize);
				% \draw[ultra thick,white] (-30:0.2) circle (\vsize);
				% \draw[ultra thick,white] (210:0.2) circle (\vsize);
				% \draw[ultra thick,white] (90:0.2) circle (\vsize);
			\end{scope}
			\draw[] (-30:0.22) circle (\vsize);
			\draw[] (210:0.22) circle (\vsize);
			\draw[] (90:0.22) circle (\vsize);
			\useasboundingbox (current bounding box);
			\node at (-0.7, 0.7){};
			\end{tikzpicture}

	\end{frame}


	\begin{frame} %%%%%%%%%%      PROPOSITION DUMP       %%%%%%%%%%%%%%%%
		\frametitle{Uniqunenss}
		% Let $\dg M$ be a PDG.
		{\color{red} (oli: this slide should be rebalanced)}

		\begin{prop}[uniqueness]
			\begin{enumerate}
			\item If  $0 < \gamma \leq \min_L \beta_L^{\dg M}$, then
			$\bbr{\dg M}_\gamma^*$ is a singleton.
	    \item $\displaystyle\lim_{\gamma\to0}\bbr{\dg M}_\gamma^*$ is a singleton.
			\end{enumerate}
			\end{prop}

		\end{frame}

	\againframe<5->{semantics}
\subsection{BNs and PDGs}
	\begin{frame}%%%%%%%%%          BN THEOREM
		\begin{center}
		\begin{tikzpicture}
			\fill[benchcolor1,opacity=0.5] (0.1,0) -- (-1,1) -- (-2,0.7) -- (-2.5,-0.1) -- (-1.5, -0.5) -- cycle;
			\node[align=center] at (-1,0.2) {$\SD{\dg M}$};
			\fill[benchcolor2,opacity=0.5] (-0.1,0) -- (0.5,0.2)  -- (1, 1) -- (2, -0.5) -- cycle;
			\node[align=center] at (1,0.2) {$\CI_{\mathcal B}$};

			\node[fill=black, circle,inner sep=0.1em] (dot) at (0,0){};
			\node[below=0.5em of dot] (dotl) {$\Pr_{\mathcal B}$};
			\draw (dotl) -- (dot);

		\end{tikzpicture}
		\end{center}
		Let $\PDGof{\mathcal B, \beta}$ be the PDG
		corresponding to the BN $\mathcal B$, with weights $\beta$
		\begin{theorem}[BNs are PDGs] \label{thm:bns-are-pdgs}
			If $\mathcal B$ is a Bayesian network and $\Pr_{\mathcal B}$ is the distribution it specifies, then for all $\gamma > 0$ and all vectors $\beta$,
			$$\bbr{\PDGof{\mathcal B, \beta}}_\gamma^* = \{ \Pr\nolimits_{\mathcal B}\},
			\quad\text{and thus}\quad\bbr{\PDGof{\mathcal B, \beta}}^* = \Pr\nolimits_{\mathcal B}.$$
			\end{theorem}
		\end{frame}
\subsection{Factor Graphs and PDGs}
	\begin{frame} \frametitle{PDGs as Factor Graphs}
		\begin{center}
		\begin{tikzpicture||precompiled}[center base]{smoking-PDG}
			\node[dpadded] (1) at (1.65,-1.1) {$\pdgunit$};
			\node[dpadded] (PS) at (1.65,0.4) {$\mathit{PS}$};
			\node[dpadded] (S) at (3.2, 0.8) {$S$};
			\node[dpadded] (SH) at (3.35, -0.8) {$\mathit{SH}$};
			\node[dpadded] (C) at (4.8,0.4) {$C$};
			\node[dpadded] (T) at (4.8,-1.1) {$T$};

			\draw[arr1] (1) -- (PS);
			\draw[arr2] (PS) -- (S);
			\draw[arr2] (PS) -- (SH);
			\mergearr{SH}{S}{C}
			\draw[arr1] (T) -- (C);
			\end{tikzpicture||precompiled}
		~{\Large$\rightsquigarrow$}~
		\begin{tikzpicture}[center base, xscale=1.2,
			fgnode/.append style={minimum width=2.3em, inner sep=0.2em}]
			\node[factor] (prior) at (1.65,-1) {};
			\node[factor] (center) at (3.75, 0.1){};

			\node[fgnode] (PS) at (1.65,0.5) {$\mathit{PS}$};
			\node[fgnode] (S) at (3.1, 0.8) {$S$};
			\node[fgnode] (SH) at (3.0, -0.8) {$\mathit{SH}$};
			\node[fgnode] (C) at (4.8,0.5) {$C$};

			\draw[thick] (prior) -- (PS);
			\draw[thick] (PS) --node[factor](pss){} (S);
			\draw[thick] (PS) --node[factor](pssh){} (SH);
			\draw[thick] (S) -- (center) (center) -- (SH) (C) -- (center);


			\node[fgnode] (T) at (4.8, -1.3) {$T$};
			\draw[thick] (T) -- node[factor]{}  (C);
			\end{tikzpicture}
			\end{center}


		\pause
		The cpds of a PDG are essentially factors. Are the semantics different?

		\pause
		{Not for $\gamma = 1$.}


		\begin{theorem}
			$\bbr{\dg N}_{1}^* = \Pr_{\FGof{\dg N}}\;$ for all unweighted
			PDGs $\dg N$.
		\end{theorem}
		\pause
		{\setbeamercolor{block body}{bg=structurecolor!50!white}
		 \setbeamercolor{block title}{bg=structurecolor!70!black,fg=white}
		\begin{theorem}\label{thm:pdg-is-wfg}
			For all unweighted PDGs $\dg{N}$ and non-negative vectors $\mat v$
			over the edges of $\dg N$, and all $\gamma > 0$, we have that
			$\bbr{(\dg N, \mat v, \gamma \mat v)}_{\gamma}
			= \gamma\,\GFE_{(\Phi_{\dg N}, \mat v)} $; consequently,
			$\bbr{(\dg N,  \mat v,  \gamma\mat v)}_{\gamma}^*
					= \{\Pr_{(\Phi_{\dg N}, \mat v)} \}$.
		\end{theorem}
		 }
		\end{frame}

	\begin{frame} \frametitle{Factor Graphs as PDGs}
		\begin{center}
			\begin{tikzpicture}[center base, xscale=1.3,
				fgnode/.append style={minimum width=2.4em, inner sep=0.2em}]
				\node[factor] (prior) at (1.65,-1) {};
				\node[factor] (center) at (3.75, 0.1){};

				\node[fgnode] (PS) at (1.65,0.5) {$\mathit{PS}$};
				\node[fgnode] (S) at (3.1, 0.8) {$S$};
				\node[fgnode] (SH) at (3.0, -0.8) {$\mathit{SH}$};
				\node[fgnode] (C) at (4.8,0.5) {$C$};

				\draw[thick] (prior) -- (PS);
				\draw[thick] (PS) --node[factor](pss){} (S);
				\draw[thick] (PS) --node[factor](pssh){} (SH);
				\draw[thick] (S) -- (center) (center) -- (SH) (C) -- (center);


				\node[fgnode] (T) at (4.8, -1.3) {$T$};
				\draw[thick] (T) -- node[factor]{}  (C);
				\end{tikzpicture}
			~{\Large$\rightsquigarrow$}~
			\pause
			\begin{tikzpicture}[center base, xscale=1.5,
		        newnode/.style={rectangle, inner sep=5pt, fill=gray!30, rounded corners=3, thick,draw}]
				\node[newnode] (prior) at (1.65,-1) {};
				\node[newnode] (center) at (4.1, 0.25){};

				\node[dpadded] (PS) at (1.65,0.5) {$\mathit{PS}$};
				\node[dpadded] (S) at (3.3, 0.8) {$S$};
				\node[dpadded] (SH) at (3.3, -0.6) {$\mathit{SH}$};
				\node[dpadded] (C) at (4.9,0.5) {$C$};

				\draw[arr, ->>, shorten <=0pt] (prior) -- (PS);
				\draw[arr, <<->>] (PS) --node[newnode](pss){} (S);
				\draw[arr, <<->>] (PS) --node[newnode](pssh){} (SH);
				\draw[arr, <<-, shorten >=0pt] (S) -- (center);
				\draw[arr, <<-, shorten >=0pt] (SH)-- (center);
				\draw[arr, <<-, shorten >=0pt] (C) -- (center);

				\node[dpadded, fill=blue] (1) at (2.7,-1.8) {$\pdgunit$};

				\draw[blue!50, arr] (1) -- (prior);
				\draw[blue!50, arr] (1) to[bend right=30] (center);
				\draw[blue!50, arr] (1) to[bend right = 5] (pss);
				\draw[blue!50, arr] (1) to[bend left = 10] (pssh);


				\node[dpadded] (T) at (4.8, -1.7) {$T$};
				\draw[arr, <<->>] (T) -- node[newnode](tc){}  (C);

				\draw[blue!50, arr] (1) to[bend right = 10] (tc);
				\end{tikzpicture}
			\end{center}
		\pause

		\begin{theorem}
			$\Pr_{\Phi} = \bbr{\UPDGof{\Phi}}_{1}^*\;$ for all factor graphs $\Phi$.
		\end{theorem}
		\pause
		{\setbeamercolor{block body}{bg=structurecolor!50!white}
		 \setbeamercolor{block title}{bg=structurecolor!70!black,fg=white}
		\begin{theorem}
		For all weighted factor graphs $\Psi = (\Phi,\theta)$ and all $\gamma > 0$,
		we have that
		$\GFE_\Psi
		= \nicefrac1{\gamma} \bbr{{\dg M}_{\Psi,\gamma}}_{\gamma}
		+ C$
		for some constant $C$, so
		$\Pr_{\Psi}$ is the unique element of
		$\bbr{{\dg M}_{\Psi,\gamma}}_{\gamma}^*$.
		\end{theorem}
		}
		\end{frame}

	\begin{frame}\frametitle{Issues with Factor Graphs}

	\end{frame}
	\begin{frame} %%%%%%%      SCORING FUNCTION BREAKDOWN       %%%%%%
		% \begin{prop}\label{prop:nice-score}%
			Letting $x^{\mat w}$ and $y^{\mat w}$ denote the values of
			$X$ and $Y$, respectively, in $\mat w \in \V(\dg M)$,
			we have
			\begin{equation*}\label{eq:semantics-breakdown}
				\begin{split}
					\bbr{\dg M}(\mu) =  \Ex_{\mat w \sim \mu}\! \Bigg\{
					 \sum_{ X \xrightarrow{\!\!L} Y  }
					\bigg[\,
					    {\color{benchcolor1}\overbrace{\color{black}
					      \beta_L \log \frac{1}{\bp(y^{\mat w} |x^{\mat w})}
						}^{\color{benchcolor1}\smash{\mathclap{\text{log likelihood / cross entropy}}}}}~+
						 \qquad\qquad\qquad\\[-0.7em]\qquad\qquad
					    {\color{benchcolor2}\underbrace{\color{black}
					({\alpha_L}\gamma - \beta_L ) \log \frac{1}{\mu(y^{\mat w} |x^{\mat w})}
						}_{\color{benchcolor2}\smash{\mathclap{\text{local regularization ($\beta_L >
						\alpha_L
						\gamma$)}}}}}~\bigg] - \color{structurecolor!70!blue}\underbrace{\color{black}
					\gamma \log \frac{1}{\mu(\mat w)}
						}_{\color{structurecolor!70!blue}\smash{\mathclap{\text{~~~~global
					        regularization}}}}\color{black} \Bigg\} .
					\end{split}
				\end{equation*}
			% \end{prop}
		\end{frame}

		\begin{frame}
			\frametitle{Conclusion Slide}
		\end{frame}
\end{document}
